npm warn invalid config cache=false set in command line options
npm warn invalid config Must be valid filesystem path

> frontend@0.1.0 test
> jest

[baseline-browser-mapping] The data in this module is over two months old.  To ensure accurate Baseline data, please update: `npm i baseline-browser-mapping@latest -D`
[baseline-browser-mapping] The data in this module is over two months old.  To ensure accurate Baseline data, please update: `npm i baseline-browser-mapping@latest -D`
[baseline-browser-mapping] The data in this module is over two months old.  To ensure accurate Baseline data, please update: `npm i baseline-browser-mapping@latest -D`
[baseline-browser-mapping] The data in this module is over two months old.  To ensure accurate Baseline data, please update: `npm i baseline-browser-mapping@latest -D`
[baseline-browser-mapping] The data in this module is over two months old.  To ensure accurate Baseline data, please update: `npm i baseline-browser-mapping@latest -D`
[baseline-browser-mapping] The data in this module is over two months old.  To ensure accurate Baseline data, please update: `npm i baseline-browser-mapping@latest -D`
[baseline-browser-mapping] The data in this module is over two months old.  To ensure accurate Baseline data, please update: `npm i baseline-browser-mapping@latest -D`
[baseline-browser-mapping] The data in this module is over two months old.  To ensure accurate Baseline data, please update: `npm i baseline-browser-mapping@latest -D`
PASS __tests__/lib/utils.test.ts
PASS __tests__/lib/validation.test.ts
PASS __tests__/components/AuthProvider.test.tsx
PASS __tests__/hooks/useHierarchy.test.ts
PASS __tests__/app/dashboard/page.test.tsx
  ‚óè Console

    console.warn
      Failed to fetch pending sales for approvals count: TypeError: _api.default.getSales is not a function
          at getSales (C:\Users\ASHROCK\Desktop\projectai\frontend\app\dashboard\ClientPage.tsx:964:55)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)

    [0m [90m 1002 |[39m [32m                // Silently handle 403 errors (expected for users without sales access)[39m
     [90m 1003 |[39m [32m                if (salesStatus !== 403 && salesStatus !== 500) {[39m
    [31m[1m>[22m[39m[90m 1004 |[39m [32m                  console.warn('Failed to fetch pending sales for approvals count:', salesErr);[39m
     [90m      |[39m                           [31m[1m^[22m[39m
     [90m 1005 |[39m [32m                }[39m
     [90m 1006 |[39m [32m                debugInfo.salesError = salesStatus === 403 ? 'No access' : salesStatus === 500 ? 'Server error' : 'Error';[39m
     [90m 1007 |[39m [32m              }[39m[0m

      at warn (app/dashboard/ClientPage.tsx:1004:27)

    console.warn
      Failed to fetch pending sales for approvals count: TypeError: _api.default.getSales is not a function
          at getSales (C:\Users\ASHROCK\Desktop\projectai\frontend\app\dashboard\ClientPage.tsx:964:55)
          at runNextTicks (node:internal/process/task_queues:64:5)
          at listOnTimeout (node:internal/timers:567:9)
          at processTimers (node:internal/timers:541:7)

    [0m [90m 1002 |[39m [32m                // Silently handle 403 errors (expected for users without sales access)[39m
     [90m 1003 |[39m [32m                if (salesStatus !== 403 && salesStatus !== 500) {[39m
    [31m[1m>[22m[39m[90m 1004 |[39m [32m                  console.warn('Failed to fetch pending sales for approvals count:', salesErr);[39m
     [90m      |[39m                           [31m[1m^[22m[39m
     [90m 1005 |[39m [32m                }[39m
     [90m 1006 |[39m [32m                debugInfo.salesError = salesStatus === 403 ? 'No access' : salesStatus === 500 ? 'Server error' : 'Error';[39m
     [90m 1007 |[39m [32m              }[39m[0m

      at warn (app/dashboard/ClientPage.tsx:1004:27)

PASS __tests__/components/common/tabs.test.tsx
PASS __tests__/lib/rbac/models.test.ts
PASS __tests__/components/ui/table.test.tsx
PASS __tests__/lib/rbac/protected-route.test.tsx
PASS __tests__/lib/rbac/permission-gate.test.tsx
PASS __tests__/lib/services/role-service.test.ts
PASS __tests__/components/common/table.test.tsx
PASS __tests__/app/users/[id]/page.test.tsx
PASS __tests__/components/ui/dialog.test.tsx (5.62 s)
PASS __tests__/components/common/loading-components.test.tsx
PASS __tests__/lib/services/permission-service.test.ts
PASS __tests__/lib/rbac/use-authorization.test.ts
FAIL __tests__/app/settings/page.test.tsx
  ‚óè SettingsPage ‚Ä∫ renders page component

    Unable to find an element by: [data-testid="layout"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mstyle[39m=[32m"width: 100%;"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 32px;"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"sc-65c4840f-3 gNvdGr"[39m
              [33mstyle[39m=[32m"margin-bottom: 0px;"[39m
            [36m>[39m
              [36m<h1>[39m
                [0mSystem Overview[0m
              [36m</h1>[39m
              [36m<p>[39m
                [0mReal-time metrics and system health indicators.[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
              [33mdata-slot[39m=[32m"button"[39m
              [33mstyle[39m=[32m"display: flex; align-items: center; gap: 0.8rem; border-radius: 12px; padding: 8px 16px; font-weight: 600; height: 40px;"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-refresh-cw"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"16"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"16"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M21 3v5h-5"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M8 16H3v5"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mRefresh Data[0m
            [36m</button>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"sc-65c4840f-8 iXOouX"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"sc-65c4840f-9 hVjYGc"[39m
            [36m>[39m
              [36m<div[39m
                [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
              [36m>[39m
                [36m<div>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"sc-65c4840f-10 dlRULC"[39m
                  [36m>[39m
                    [0mTotal Users[0m
                  [36m</p>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"sc-65c4840f-11 hRJrfr"[39m
                  [36m>[39m
                    [0m0[0m
                  [36m</p>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"sc-65c4840f-0 hnJoLy"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-users"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 3.128a4 4 0 0 1 0 7.744"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M22 21v-2a4 4 0 0 0-3-3.87"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"9"[39m
                      [33mcy[39m=[32m"7"[39m
                      [33mr[39m=[32m"4"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<p[39m
                [33mclass[39m=[32m"sc-65c4840f-12 eKNNnY"[39m
              [36m>[39m
                [0m0[0m
                [0m active members[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"sc-65c4840f-9 hVjYGc"[39m
            [36m>[39m
              [36m<div[39m
                [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
              [36m>[39m
                [36m<div>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"sc-65c4840f-10 dlRULC"[39m
                  [36m>[39m
                    [0mPending Actions[0m
                  [36m</p>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"sc-65c4840f-11 hRJrfr"[39m
                  [36m>[39m
                    [0m0[0m
                  [36m</p>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"sc-65c4840f-0 hnJoLy"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-history"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M3 3v5h5"[39m
                    [36m/>[39m
       ...

    [0m [90m 170 |[39m     render([33m<[39m[33mSettingsPage[39m [33m/[39m[33m>[39m[33m,[39m { wrapper[33m:[39m createWrapper() })
     [90m 171 |[39m
    [31m[1m>[22m[39m[90m 172 |[39m     [36mawait[39m waitFor(() [33m=>[39m {
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 173 |[39m       expect(screen[33m.[39mgetByTestId([32m'layout'[39m))[33m.[39mtoBeInTheDocument()
     [90m 174 |[39m     })
     [90m 175 |[39m[0m

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (__tests__/app/settings/page.test.tsx:172:18)

PASS __tests__/app/notifications/page.test.tsx
PASS __tests__/lib/rbac/component-gate.test.tsx
PASS __tests__/app/users/[id]/edit/page.test.tsx
PASS __tests__/lib/api.test.ts
PASS __tests__/components/ui/input.test.tsx
PASS __tests__/components/ui/button.test.tsx
PASS __tests__/store/userStore.test.ts
PASS __tests__/app/users/page.test.tsx
PASS __tests__/app/project/create/page.test.tsx
PASS __tests__/components/layout.test.tsx
PASS __tests__/app/finance/create/page.test.tsx
PASS __tests__/app/admin/page.test.tsx
PASS __tests__/app/transaction/list/page.test.tsx
  ‚óè Console

    console.warn
      Failed to load summary from backend: TypeError: _api.default.getFinancialSummary is not a function
          at getFinancialSummary (C:\Users\ASHROCK\Desktop\projectai\frontend\app\transaction\list\ClientPage.tsx:507:19)
          at loadSummary (C:\Users\ASHROCK\Desktop\projectai\frontend\app\transaction\list\ClientPage.tsx:870:7)
          at Object.react_stack_bottom_frame (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:25989:20)
          at runWithFiberInDEV (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:874:13)
          at commitHookEffectListMount (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13249:29)
          at commitHookPassiveMountEffects (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13336:11)
          at commitPassiveMountOnFiber (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:15484:13)
          at recursivelyTraversePassiveMountEffects (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:15476:11)
          at recursivelyTraversePassiveMountEffects (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:15439:11)
          at commitPassiveMountOnFiber (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:15519:11)
          at flushPassiveEffects (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:18432:9)
          at C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:17923:15
          at flushActQueue (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\react\cjs\react.development.js:590:34)
          at process.env.NODE_ENV.exports.act (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\react\cjs\react.development.js:884:10)
          at C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\@testing-library\react\dist\act-compat.js:47:25
          at renderRoot (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\@testing-library\react\dist\pure.js:190:26)
          at render (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\@testing-library\react\dist\pure.js:292:10)
          at Object.<anonymous> (C:\Users\ASHROCK\Desktop\projectai\frontend\__tests__\app\transaction\list\page.test.tsx:84:11)
          at Promise.finally.completed (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
          at _callCircusTest (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at _runTest (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
          at C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\jest-circus\build\jestAdapterInit.js:849:7
          at _runTestsForDescribeBlock (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
          at _runTestsForDescribeBlock (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
          at run (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
          at runAndTransformResultsToJestFormat (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
          at jestAdapter (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\jest-runner\build\testWorker.js:275:16)
          at runTest (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\jest-runner\build\testWorker.js:343:7)
          at Object.worker (C:\Users\ASHROCK\Desktop\projectai\frontend\node_modules\jest-runner\build\testWorker.js:497:12)

    [0m [90m 551 |[39m       }))[33m;[39m
     [90m 552 |[39m     } [36mcatch[39m (err) {
    [31m[1m>[22m[39m[90m 553 |[39m       console[33m.[39mwarn([32m'Failed to load summary from backend:'[39m[33m,[39m err)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 554 |[39m       [90m// Don't show error, just use local calculations as fallback[39m
     [90m 555 |[39m     } [36mfinally[39m {
     [90m 556 |[39m       setLoadingSummary([36mfalse[39m)[33m;[39m[0m

      at warn (app/transaction/list/ClientPage.tsx:553:15)
      at loadSummary (app/transaction/list/ClientPage.tsx:870:7)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25989:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:13249:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13336:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15484:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15476:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15439:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:15519:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:18432:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17923:15
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/transaction/list/page.test.tsx:84:11)

PASS __tests__/app/department/create/page.test.tsx
PASS __tests__/app/employees/create/page.test.tsx
PASS __tests__/app/accountants/create/page.test.tsx
PASS __tests__/app/profile/page.test.tsx
FAIL __tests__/app/department/list/page.test.tsx
  ‚óè DepartmentListPage ‚Ä∫ renders page component

    useAuth must be used within an AuthProvider

    [0m [90m 225 |[39m   [36mconst[39m context [33m=[39m useContext([33mAuthContext[39m)[33m;[39m
     [90m 226 |[39m   [36mif[39m (context [33m===[39m undefined) {
    [31m[1m>[22m[39m[90m 227 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider'[39m)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 228 |[39m   }
     [90m 229 |[39m   [36mreturn[39m context[33m;[39m
     [90m 230 |[39m }[33m;[39m[0m

      at useAuth (lib/rbac/auth-context.tsx:227:11)
      at DepartmentListPage (app/department/list/ClientPage.tsx:421:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/department/list/page.test.tsx:67:11)

FAIL __tests__/components/common/footer.test.tsx
  ‚óè Footer Component ‚Ä∫ has correct link hrefs

    expect(element).toHaveAttribute("href", "/about") // element.getAttribute("href") === "/about"

    Expected the element to have attribute:
      href="/about"
    Received:
      href="/service/about"

    [0m [90m 43 |[39m   it([32m'has correct link hrefs'[39m[33m,[39m () [33m=>[39m {
     [90m 44 |[39m     render([33m<[39m[33mFooter[39m [33m/[39m[33m>[39m)
    [31m[1m>[22m[39m[90m 45 |[39m     expect(screen[33m.[39mgetByText([32m'About'[39m)[33m.[39mclosest([32m'a'[39m))[33m.[39mtoHaveAttribute([32m'href'[39m[33m,[39m [32m'/about'[39m)
     [90m    |[39m                                                    [31m[1m^[22m[39m
     [90m 46 |[39m     expect(screen[33m.[39mgetByText([32m'Privacy'[39m)[33m.[39mclosest([32m'a'[39m))[33m.[39mtoHaveAttribute([32m'href'[39m[33m,[39m [32m'/privacy'[39m)
     [90m 47 |[39m     expect(screen[33m.[39mgetByText([32m'Terms'[39m)[33m.[39mclosest([32m'a'[39m))[33m.[39mtoHaveAttribute([32m'href'[39m[33m,[39m [32m'/terms'[39m)
     [90m 48 |[39m     expect(screen[33m.[39mgetByText([32m'Contact'[39m)[33m.[39mclosest([32m'a'[39m))[33m.[39mtoHaveAttribute([32m'href'[39m[33m,[39m [32m'/contact'[39m)[0m

      at Object.toHaveAttribute (__tests__/components/common/footer.test.tsx:45:52)

PASS __tests__/app/(protected)/layout.test.tsx
PASS __tests__/components/ui/textarea.test.tsx
FAIL __tests__/app/project/list/page.test.tsx
  ‚óè ProjectListPage ‚Ä∫ renders page component

    useAuth must be used within an AuthProvider

    [0m [90m 225 |[39m   [36mconst[39m context [33m=[39m useContext([33mAuthContext[39m)[33m;[39m
     [90m 226 |[39m   [36mif[39m (context [33m===[39m undefined) {
    [31m[1m>[22m[39m[90m 227 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider'[39m)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 228 |[39m   }
     [90m 229 |[39m   [36mreturn[39m context[33m;[39m
     [90m 230 |[39m }[33m;[39m[0m

      at useAuth (lib/rbac/auth-context.tsx:227:11)
      at ProjectListPage (app/project/list/ClientPage.tsx:634:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/project/list/page.test.tsx:68:11)

PASS __tests__/lib/rbac/component-access.test.ts
PASS __tests__/app/auth/reset-password/page.test.tsx
PASS __tests__/components/common/header.test.tsx
PASS __tests__/components/ui/switch.test.tsx
PASS __tests__/app/sales/accounting/page.test.tsx
PASS __tests__/components/ui/checkbox.test.tsx
PASS __tests__/app/inventory/sales/page.test.tsx
PASS __tests__/app/budgets/page.test.tsx
PASS __tests__/app/settings/users-roles/user-roles/page.test.tsx
PASS __tests__/app/approvals/page.test.tsx
PASS __tests__/app/settings/backup/page.test.tsx
PASS __tests__/components/common/sidebar.test.tsx
PASS __tests__/app/report/page.test.tsx
PASS __tests__/app/auth/login/page.test.tsx
PASS __tests__/components/ui/label.test.tsx
FAIL __tests__/app/search/page.test.tsx
  ‚óè SearchPage ‚Ä∫ renders page component

    useAuth must be used within an AuthProvider

    [0m [90m 225 |[39m   [36mconst[39m context [33m=[39m useContext([33mAuthContext[39m)[33m;[39m
     [90m 226 |[39m   [36mif[39m (context [33m===[39m undefined) {
    [31m[1m>[22m[39m[90m 227 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider'[39m)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 228 |[39m   }
     [90m 229 |[39m   [36mreturn[39m context[33m;[39m
     [90m 230 |[39m }[33m;[39m[0m

      at useAuth (lib/rbac/auth-context.tsx:227:11)
      at SearchPage (app/search/ClientPage.tsx:292:37)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/search/page.test.tsx:40:11)

FAIL __tests__/app/finance/list/page.test.tsx
  ‚óè FinanceListPage ‚Ä∫ renders page component

    useAuth must be used within an AuthProvider

    [0m [90m 225 |[39m   [36mconst[39m context [33m=[39m useContext([33mAuthContext[39m)[33m;[39m
     [90m 226 |[39m   [36mif[39m (context [33m===[39m undefined) {
    [31m[1m>[22m[39m[90m 227 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider'[39m)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 228 |[39m   }
     [90m 229 |[39m   [36mreturn[39m context[33m;[39m
     [90m 230 |[39m }[33m;[39m[0m

      at useAuth (lib/rbac/auth-context.tsx:227:11)
      at FinanceListPage (app/finance/list/ClientPage.tsx:512:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/finance/list/page.test.tsx:38:11)

PASS __tests__/app/settings/history/page.test.tsx
PASS __tests__/app/permissions/layout.test.tsx
FAIL __tests__/app/accountants/list/page.test.tsx
  ‚óè AccountantsListPage ‚Ä∫ renders page component

    useAuth must be used within an AuthProvider

    [0m [90m 225 |[39m   [36mconst[39m context [33m=[39m useContext([33mAuthContext[39m)[33m;[39m
     [90m 226 |[39m   [36mif[39m (context [33m===[39m undefined) {
    [31m[1m>[22m[39m[90m 227 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider'[39m)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 228 |[39m   }
     [90m 229 |[39m   [36mreturn[39m context[33m;[39m
     [90m 230 |[39m }[33m;[39m[0m

      at useAuth (lib/rbac/auth-context.tsx:227:11)
      at AccountantListPageInner (app/accountants/list/ClientPage.tsx:576:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/accountants/list/page.test.tsx:37:11)

PASS __tests__/lib/rbac/index.test.ts
FAIL __tests__/app/employees/list/page.test.tsx
  ‚óè EmployeesListPage ‚Ä∫ renders page component

    useAuth must be used within an AuthProvider

    [0m [90m 225 |[39m   [36mconst[39m context [33m=[39m useContext([33mAuthContext[39m)[33m;[39m
     [90m 226 |[39m   [36mif[39m (context [33m===[39m undefined) {
    [31m[1m>[22m[39m[90m 227 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider'[39m)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 228 |[39m   }
     [90m 229 |[39m   [36mreturn[39m context[33m;[39m
     [90m 230 |[39m }[33m;[39m[0m

      at useAuth (lib/rbac/auth-context.tsx:227:11)
      at EmployeeListPage (app/employees/list/ClientPage.tsx:530:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/employees/list/page.test.tsx:37:11)

FAIL __tests__/app/settings/layout.test.tsx
  ‚óè SettingsLayout ‚Ä∫ renders layout with children

    useAuth must be used within an AuthProvider

    [0m [90m 225 |[39m   [36mconst[39m context [33m=[39m useContext([33mAuthContext[39m)[33m;[39m
     [90m 226 |[39m   [36mif[39m (context [33m===[39m undefined) {
    [31m[1m>[22m[39m[90m 227 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider'[39m)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 228 |[39m   }
     [90m 229 |[39m   [36mreturn[39m context[33m;[39m
     [90m 230 |[39m }[33m;[39m[0m

      at useAuth (lib/rbac/auth-context.tsx:227:11)
      at SettingsLayout (app/settings/layout.tsx:160:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/settings/layout.test.tsx:20:46)

PASS __tests__/app/unauthorized/layout.test.tsx
PASS __tests__/lib/services/index.test.ts
PASS __tests__/app/accountants/page.test.tsx
PASS __tests__/app/settings/general/page.test.tsx
PASS __tests__/app/department/page.test.tsx
PASS __tests__/app/employees/page.test.tsx
PASS __tests__/app/expenses/page.test.tsx
PASS __tests__/app/revenue/page.test.tsx
PASS __tests__/app/project/page.test.tsx
PASS __tests__/app/forecast/page.test.tsx
PASS __tests__/app/finance/page.test.tsx
PASS __tests__/app/settings/logs/page.test.tsx
